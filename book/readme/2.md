# \[2장] 네트워크 통신을 위한 약속

## 프로토콜(Protocol)

컴퓨터나 원거리 통신 장비 사이에서 메세지를 주고 받는 양식과 규칙의 체계 (컴퓨터 세계에서 형식적으로 나누는 인사 과정)

**대표적인 프로토콜**

* OSI 7계층 (Open System Interconnection 7 Layers)
* TCP/IP 4계층 (Transmission Control Protocol/Internet Protocol 4 Layers)

***

### OSI 7 계층

컴퓨터와 컴퓨터가 통신하는 구조를 7개의 계층으로 정의해 둔 약속

_(제조사마다 다른 프로토콜 사용으로 컴퓨터 효용성의 한계가 생길 것을 방지해 ISO에서 OSI 7계층이라는 표준을 제정함)_

| 계층  |           | 설명                                          |
| --- | --------- | ------------------------------------------- |
| 7계층 | 응용 계층     | 사용자와 애플리케이션 간의 소통 (e.g., 이메일 보내기, 웹 사이트 조회) |
| 6계층 | 표현 계층     | 데이터를 어떻게 표현할지 정의 (e.g., 데이터 암호화, 데이터 압축 등)  |
| 5계층 | 세션 계층     | 통신을 설정, 관리, 종료(일반적으로 통신을 위한 세션을 체결)         |
| 4계층 | 전송 계층     | 신뢰성 있는 정확한 데이터 전달                           |
| 3계층 | 네트워크 계층   | 네트워크 장치 간의 경로 선택과 데이터 전송                    |
| 2계층 | 데이터 링크 계층 | 물리적인 연결을 통해 오류 없는 데이터 전달                    |
| 1계층 | 물리 계층     | 전기 신호를 이용해서 통신 케이블로 데이터를 전송                 |

**OSI 7 계층 통신 흐름**

(송신자) 응용 계층 → 물리 계층

(수신자) 물리 계층 → 응용 계층

**계층 분리로 얻는 효과**

1. 통신이 일어나는 과정을 단계별로 확인 할 수 있다
2. 통신에 문제가 발생했을 때 원인 파악 및 해결이 쉽다

### TCP/IP 4 계층

OSI 7 계층을 기반으로 만들어진 인터넷 표준

| 계층  |               | 설명                                          |
| --- | ------------- | ------------------------------------------- |
| 4계층 | 응용 계층         | 사용자와 애플리케이션 간의 소통 (e.g., 이메일 보내기, 웹 사이트 조회) |
| 3계층 | 전송 계층         | 데이터의 전송 및 흐름에 있어 신뢰성 보장                     |
| 2계층 | 인터넷 계층        | 물리적으로 데이터가 네트워크를 통해 어떻게 전송 되는지를 정의          |
| 1계층 | 네트워크 인터페이스 계층 | 데이터를 전기 신호로 변환한 뒤 데이터 전송                    |

**OSI 모델과 TCP/IP 모델 비교**

**전송 단위**

* 응용 계층 \~ 세션 계층: 데이터 혹은 메세지
* 전송 계층: 세그먼트
* 네트워크 계층: 패킷
* 데이터링크 계층: 프레임
* 물리 계층: 비트

***

### **캡슐화(Encapsulation)**

계층에 따라 정보를 담은 [헤더](https://www.notion.so/2-48eb025d9bdd48d7856ee276c834b1c4?pvs=21)를 데이터에 붙여나가는 과정 (상대방에게 보내려는 데이터에 그 데이터를 보내기 위해 필요한 정보들을 헤더라는 이름으로 붙여나가는 것)

**헤더 정보**

| 계층        | 정보                 |
| --------- | ------------------ |
| 전송 계층     | 포트 정보              |
| 네트워크 계층   | 송수신자의 IP 정보        |
| 데이터 링크 계층 | 송수신자의 MAC 주소, 트레일러 |

### **역캡슐화(Decapsulation)**

헤더 정보가 하나씩 벗겨지는 것

—

* **헤더(header)**: 각 계층을 지나면서 덧붙여지는 정보 \*_OSI 7 계층을 지나면 데이터에 정보가 하나씩 덧붙여진다_
* **포트(port) 번호**: 애플리케이션을 구분하기 위한 번호
* **IP 주소**: 인터넷에 연결되어 있는 모든 장치를 식별할 수 있도록 각각의 장치에 부여된 고유 주소 (인터넷 서비스를 가입하면 할당 받는 주소)
* **MAC 주소**: 하드웨어 장치에 할당된 주소 (컴퓨터를 구매할 때부터 할당되어 있는 기기 고유 번호)
* **트레일러(Trailer)**: 전달한 데이터에 오류가 없는지 검출하기 위한 용도로 사용 \*\*

💡 \*\*캡슐화와 역캡슐화는 통신하는 데 꼭 필요한 정보를 얻기 위한 과정\*\*

***

### VPN(Virtual Private Network, 가상 사설망)

인터넷을 통해 데이터를 안전하게 전송하기 위한 기술

**동작 방식**

1. VPN 클라이언트 소프트웨어 설치
2. VPN 서버 연결 및 인증 - 사용자 이름과 암호를 사용하여 인증
3. 데이터 암호화 - VPN 연결이 설정되면 모든 데이터는 암호화 되어 전송됨
4. 터널링 - 암호화된 데이터를 전송하기 위해 터널링 기술을 사용 \*_터널링(Tunneling): 네트워크 사이에 통로를 생성하는 것_

→ 이후 통신이 종료되면 VPN 터널은 해제되고 VPN 연결도 종료된다

**VPN 종류**

| 구분       | IPSec VPN      | SSL VPN     |
| -------- | -------------- | ----------- |
| OSI 7 계층 | 3 계층           | 4\~7 계층     |
| 암호화      | IP 패킷 암호화      | 데이터 암호화     |
| 접속 방법    | 소프트웨어를 설치하여 접속 | 웹 브라우저에서 접속 |
